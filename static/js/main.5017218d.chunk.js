(this["webpackJsonpReact-D3"]=this["webpackJsonpReact-D3"]||[]).push([[0],{72:function(e,t,a){e.exports=a(78)},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),i=a.n(c),l=a(2),o=a(3),s=a(5),u=a(4),f=a(6),m=a(1),h=20,d=5,g=20,p=35,b=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={highs:null,lows:null,xScale:m.h().range([p,650-d]),yScale:m.g().range([400-g,h]),lineGenerator:m.e()},a.xAxis=m.b().scale(a.state.xScale).tickFormat(m.j("%b")),a.yAxis=m.c().scale(a.state.yScale).tickFormat((function(e){return"".concat(e,"\u2109")})),a}return Object(f.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){m.i(this.refs.xAxisRef).call(this.xAxis),m.i(this.refs.yAxisRef).call(this.yAxis)}},{key:"render",value:function(){return r.a.createElement("svg",{width:650,height:400},r.a.createElement("path",{d:this.state.highs,fill:"none",stroke:"#eb6a5b",strokeWidth:"2"}),r.a.createElement("path",{d:this.state.lows,fill:"none",stroke:"#52b6ca",strokeWidth:"2"}),r.a.createElement("g",null,r.a.createElement("g",{ref:"xAxisRef",transform:"translate(0, ".concat(400-g,")")}),r.a.createElement("g",{ref:"yAxisRef",transform:"translate(".concat(p,", 0)")})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.data)return null;var a=e.data,n=t.xScale,r=t.yScale,c=t.lineGenerator,i=m.d(a,(function(e){return e.date})),l=m.f(a,(function(e){return e.high}));n.domain(i),r.domain([0,l]),c.x((function(e){return n(e.date)})),c.y((function(e){return r(e.low)}));var o=c(a);return c.y((function(e){return r(e.high)})),{lows:o,highs:c(a)}}}]),t}(n.Component),x=a(13),v=a.n(x),y=20,E=5,j=20,k=35,O=v.a.scale(["#52b6ca","#b6e86f","#eb6a5b"]).mode("hsl"),A=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={bars:[],xScale:m.h().range([k,650-E]),yScale:m.g().range([400-j,y]),colorScale:m.g()},a.xAxis=m.b().scale(a.state.xScale).tickFormat(m.j("%b")),a.yAxis=m.c().scale(a.state.yScale).tickFormat((function(e){return"".concat(e,"\u2109")})),a}return Object(f.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){m.i(this.refs.xAxis).call(this.xAxis),m.i(this.refs.yAxis).call(this.yAxis)}},{key:"render",value:function(){return r.a.createElement("svg",{width:650,height:400},this.state.bars.map((function(e,t){return r.a.createElement("rect",{key:t,x:e.x,y:e.y,width:"2",height:e.height,fill:e.fill})})),r.a.createElement("g",null,r.a.createElement("g",{ref:"xAxis",transform:"translate(0, ".concat(400-j,")")}),r.a.createElement("g",{ref:"yAxis",transform:"translate(".concat(k,", 0)")})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.data)return null;var a=e.data,n=t.xScale,r=t.yScale,c=t.colorScale,i=m.d(a,(function(e){return e.date})),l=m.f(a,(function(e){return e.high})),o=m.d(a,(function(e){return e.avg}));return n.domain(i),r.domain([0,l]),c.domain(o),{bars:a.map((function(e){var t=r(e.high),a=r(e.low);return{x:n(e.date),y:t,height:a-t,fill:O(c(e.avg))}}))}}}]),t}(n.Component),S=v.a.scale(["#52b6ca","#b6e86f","#eb6a5b"]),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={slices:[],tempAnnotations:[],radiusScale:m.g().range([0,325]),colorScale:m.g(),arcGenerator:m.a()},a}return Object(f.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("svg",{width:650,height:650},r.a.createElement("g",{transform:"translate(".concat(325,", ").concat(325,")")},this.state.slices.map((function(e,t){return r.a.createElement("path",{key:t,d:e.path,fill:e.fill})})),this.state.tempAnnotations.map((function(e,t){return r.a.createElement("g",{key:t},r.a.createElement("circle",{r:e.r,fill:"none",stroke:"#999"}),r.a.createElement("text",{y:-e.r-2,textAnchor:"middle"},e.temp,"\u2109"))}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.data)return null;var a=e.data,n=t.radiusScale,r=t.colorScale,c=t.arcGenerator,i=m.f(a,(function(e){return e.high})),l=m.d(a,(function(e){return e.avg}));n.domain([0,i]),r.domain(l);var o=2*Math.PI/a.length;return{slices:a.map((function(e,t){return{path:c({startAngle:t*o,endAngle:(t+1)*o,innerRadius:n(e.low),outerRadius:n(e.high)}),fill:S(r(e.avg))}})),tempAnnotations:[5,20,40,60,80].map((function(e){return{r:n(e),temp:e}}))}}}]),t}(n.Component),D=a(27),R=function(){var e=Object(n.useState)([65,50,40,30,25,20]),t=Object(D.a)(e,2),a=t[0],c=t[1],i=Object(n.useRef)();return Object(n.useEffect)((function(){Object(m.i)(i.current).selectAll("circle").data(a).join("circle").attr("r",(function(e){return e})).attr("cx",10).attr("cy",10).attr("stroke","red").attr("transform","translate(150,75)").attr("class","fill-current text-orange-200 hover:text-orange-300 cursor-pointer")}),[a]),r.a.createElement("div",{className:"mt-20"},r.a.createElement("div",{className:"flex"},r.a.createElement("div",null,r.a.createElement("p",null,"D3 Controlling the SVG DOM"),r.a.createElement("svg",{ref:i})),r.a.createElement("div",null,r.a.createElement("p",null,"React Controlling the SVG DOM"),r.a.createElement("svg",null,a.map((function(e){return r.a.createElement("circle",{key:e,cx:"10",cy:"10",r:e,stroke:"red",transform:"translate(150,75)",className:"fill-current text-orange-200 hover:text-orange-300 cursor-pointer"})}))))),r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("button",{className:"border-2 m-2 p-2",onClick:function(){return c(a.map((function(e){return e+5})))}},"update"),r.a.createElement("button",{className:"border-2 m-2 p-2",onClick:function(){return c(a.filter((function(e){return e<40})))}},"filter")))},C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).initializeData=function(){fetch("https://raw.githubusercontent.com/sxywu/react-d3-example/master/public/sf.json").then((function(e){return e.json()})).then((function(e){return e.map((function(e){return Object.assign(e,{date:new Date(e.date)})}))})).then((function(e){return a.setState({data:e})}))},a.state={data:null},a}return Object(f.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.initializeData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"flex flex-wrap"},r.a.createElement(b,{data:this.state.data}),r.a.createElement(A,{data:this.state.data}),r.a.createElement(w,{data:this.state.data}),r.a.createElement(R,null))}}]),t}(n.Component);a(77);i.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.5017218d.chunk.js.map